jQuery(document).ready(function($){var translationSets=[],userLocale=gpConvertPTAO90.user_locale,glotpressAdmin=gpConvertPTAO90.admin,gpUrlProject=gpConvertPTAO90.gp_url_project;$("table.gp-table.translation-sets tr td:first-child a").each(function(){var regexPattern=new RegExp("^"+gpUrlProject+"(.*).*/(.+)/(.+)/$"),regexPattern=$(this).attr("href").match(regexPattern),locale=regexPattern[2],regexPattern=regexPattern[3],editable=gpConvertPTAO90.edit;translationSets.push(locale),$(this).closest("tr").attr("data-locale",locale),$(this).closest("tr").attr("data-slug",regexPattern),"pt-ao90"===locale&&$(this).closest("tr").attr("data-editable",editable)}),translationSets.includes("pt")&&translationSets.includes("pt-ao90")&&($('table.gp-table.translation-sets tr[data-locale="pt-ao90"] td:first-child a').closest("tr").addClass("variant"),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td:first-child').children().last().after('<span class="gp-convert-pt-ao90-update"></span>'),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td:first-child span.gp-convert-pt-ao90-update').html('<span class="translation-set-icon edit-status dashicons dashicons-lock"></span>'),glotpressAdmin)&&$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td:first-child span.gp-convert-pt-ao90-update').children().last().after('<button class="button is-small gp-convert-pt-ao90-update-button"><span class="dashicons dashicons-update icon"></span><span class="label">'+wp.i18n.__("Sync","gp-convert-pt-ao90")+"</span></button>"),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td:first-child span.gp-convert-pt-ao90-update button.gp-convert-pt-ao90-update-button').on("click",function(){var locale=$(this).closest("tr").attr("data-locale"),slug=$(this).closest("tr").attr("data-slug"),regexPattern=new RegExp("^"+gpUrlProject+"(.*)/"+locale+"/"+slug+"/$");((projectPath,locale,slug)=>{var button=$('table.gp-table.translation-sets tr[data-locale="'+locale+'"][data-slug="'+slug+'"] td:first-child button.gp-convert-pt-ao90-update-button');button.attr("disabled",!0).removeClass("success fail").addClass("updating").children("span.label").text(wp.i18n.__("Syncing...","gp-convert-pt-ao90")),wp.apiFetch({path:"/gp-convert-pt-ao90/v1/translation-set/"+projectPath+"/"+locale+"/"+slug+"/-convert",method:"POST"}).then(function(response){var percent=response.percent,current=response.current,fuzzy=response.fuzzy,untranslated=response.untranslated,waiting=response.waiting,old=response.old,rejected=response.rejected,response=response.warnings,gpToolboxUpdateHighlight=wp.hooks.hasAction("gpToolboxUpdateHighlight","update_highlight_action"),bubbleMoreThan90=button.closest("td").children("span.bubble.morethan90").length;$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.percent').text(percent+"%"),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.translated a').text(Intl.NumberFormat(userLocale.slug).format(current)),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.fuzzy a').text(Intl.NumberFormat(userLocale.slug).format(fuzzy)),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.untranslated a').text(Intl.NumberFormat(userLocale.slug).format(untranslated)),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.waiting a').text(Intl.NumberFormat(userLocale.slug).format(waiting)),gpToolboxUpdateHighlight&&($('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.old a').text(Intl.NumberFormat(userLocale.slug).format(old)),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.rejected a').text(Intl.NumberFormat(userLocale.slug).format(rejected)),$('table.gp-table.translation-sets tr[data-locale="pt-ao90"][data-slug="default"] td.stats.warnings a').text(Intl.NumberFormat(userLocale.slug).format(response)),wp.hooks.doAction("gpToolboxUpdateHighlight")),90<=percent?bubbleMoreThan90?$(button).closest("td").children("span.bubble.morethan90").text(percent+"%"):$('<span class="bubble morethan90" style="margin-left: 0.25em;">'+percent+"%</span>").insertAfter(button.closest("td").find("strong")):bubbleMoreThan90&&$(button).closest("td").children("span.bubble.morethan90").remove(),button.removeClass("updating").addClass("success"),button.children("span.icon.dashicons").hide().removeClass("dashicons-update").addClass("dashicons-yes").show(),button.children("span.label").text(wp.i18n.__("Synced!","gp-convert-pt-ao90"))}).catch(function(error){button.removeClass("updating").addClass("fail"),button.children("span.icon.dashicons").hide().removeClass("dashicons-update").addClass("dashicons-warning").show(),button.children("span.label").text(wp.i18n.__("Failed!","gp-convert-pt-ao90"))}).finally(function(){setTimeout(function(){button.attr("disabled",!1).removeClass("success fail"),button.children("span.icon.dashicons").hide().removeClass("dashicons-yes dashicons-warning").addClass("dashicons-update").show(),button.children("span.label").text(wp.i18n.__("Sync","gp-convert-pt-ao90"))},3e3)})})($(this).closest("td").find("a").attr("href").match(regexPattern)[1],locale,slug)}),$(".translation-sets").tablesorter({theme:"glotpress",sortList:[[2,1]],cssChildRow:"variant",headers:{0:{sorter:"text"}}})});
//# sourceMappingURL=scripts.min.js.map